import{d as M,a2 as N,a3 as R,p as f,v as A,$ as G,o as m,b as H,w as y,j as i,n as $,k as l,N as K,a0 as L,c as k,F as O,C as U,t as j,G as W,K as q,a7 as T}from"./framework.uyLDs8jX.js";import{M as X,q as J,r as Q,E as Y,N as Z,G as _,I as ee}from"./theme.f1I71pQ3.js";import{_ as te}from"./input.vue_vue_type_script_setup_true_lang.CfEc942h.js";import{P as ae}from"./index.D79yq5xW.js";import{S as oe,L as se,D as le,R as ne,C as re}from"./api.DwkIGh4A.js";import ue from"./api.CDmQRylI.js";import"./api.CDcoq3gP.js";import"./popup.vue_vue_type_script_setup_true_lang.B3sZFBwL.js";import"./api.BKqPkQKG.js";const ie=X(te),pe={...oe,...se,...le,...ne,...re,...ue},ce=["data-index"],de={key:1,w:"full",p:"1",flex:"","justify-center":""},ke=M({name:"WbSelect",inheritAttrs:!1,__name:"select",props:N({options:{},theme:{},icon:{type:Boolean},maxItems:{},inputProps:{},popupProps:{},onSelect:{type:Function},onShow:{type:Function},onHide:{type:Function},size:{},loading:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},clearable:{type:Boolean},value:{},modelValue:{},defaultValue:{},onChange:{type:Function}},pe),emits:["select","show","hide","change","update:value","update:modelValue"],setup(I,{emit:z}){const t=I,p=z,D=J({valueProps:["size","theme"],nameProps:["arrow"]}),B=Q(()=>{if(t.maxItems&&t.options.length>t.maxItems)return{"--wb-select-max-content-height":`calc(var(--wb-select-height) * ${t.maxItems} + var(--wb-select-padding) * 2 + var(--wb-select-gap) * ${t.maxItems-1})`}}),[c,C]=Y({props:R(t)}),[n,r]=Z(!1),w={},b={};t.options&&t.options.forEach((e,a)=>{w[e.value]=e,b[e.value]=a});const d=f(b[c.value]??-1),h=f(w[c.value]),o=f(b[c.value]??-1),u=f(w[c.value]);function S(e,a=!1){var s;t.options&&(o.value=e,u.value=t.options[e],d.value=o.value,h.value=u.value,C((s=u.value)==null?void 0:s.value),a&&r(!1))}function x(e){if(t.options&&n.value)switch(e.code){case"ArrowUp":{if(e.preventDefault(),o.value<=0){o.value=-1;return}o.value-=1,p("select",t.options[o.value].value);break}case"ArrowDown":{if(e.preventDefault(),o.value>=t.options.length){o.value=t.options.length;return}o.value+=1,p("select",t.options[o.value].value);break}case"Escape":r(!1);break;case"Tab":r(!1);break}}const V=_.get("body");A(()=>{V.on("keydown",x)}),G(()=>{V.off("keydown",x)});function P(e){const{index:a}=e;a&&(S(a-0,!0),r(!1))}function E(e){switch(e.code){case"Enter":{if(!n.value){r(!0);return}d.value=o.value,h.value=u.value,S(o.value,!0);break}case"Space":{e.preventDefault(),n.value||r(!0);break}}}function F(){t.options&&(o.value=d.value,u.value=h.value,p("select",t.options[o.value].value),p("hide"))}return(e,a)=>(m(),H(l(ae),{modelValue:l(n),"onUpdate:modelValue":a[1]||(a[1]=s=>T(n)?n.value=s:null),size:e.size,placement:"bottom-start",pure:"",class:$(l(D)),onShow:a[2]||(a[2]=s=>e.$emit("show")),onHide:F,onKeydown:E},{content:y(({trigger:s})=>[i("div",{class:$(l(D))},[i("ul",{"max-h":"$wb-select-max-content-height",p:"$wb-select-padding",bg:"$wb-select-background",rounded:"$wb-select-radius",ring:"1 $wb-select-border",flex:"~ col",gap:"$wb-select-gap",class:"wb-select-content scrollable",style:K({minWidth:`${s.width}px`,...l(B)}),onClick:a[0]||(a[0]=L(v=>l(ee)(v,"wb-select-option",P),["stop"]))},[e.options.length?(m(!0),k(O,{key:0},U(e.options,(v,g)=>(m(),k("li",{key:v.value,"data-index":g,relative:"",w:"full",h:"$wb-select-height",bg:"hover:$wb-select-option-hover-background",p:"x-$wb-select-padding",rounded:"$wb-select-radius",flex:"~ none",items:"center",cursor:"pointer",class:$(["wb-select-option",{"wb-select-option--hover":o.value===g,"wb-select-option--active":d.value===g}])},[i("span",null,j(v.label),1)],10,ce))),128)):(m(),k("div",de,a[4]||(a[4]=[i("div",{text:"sm $wb-color-text-5"},"暂无数据",-1)])))],4)],2)]),default:y(()=>{var s;return[W(l(ie),q({size:e.size},{...e.$attrs,...e.inputProps},{value:(s=u.value)==null?void 0:s.label,readonly:"",class:"wb-select-input"}),{suffix:y(()=>a[3]||(a[3]=[i("i",{w:"$wb-select-arrow",h:"$wb-select-arrow",color:"$wb-color-text-5",i:"heroicons-chevron-down-20-solid"},null,-1)])),_:1},16,["size","value"])]}),_:1},8,["modelValue","size","class"]))}});export{ke as default};
