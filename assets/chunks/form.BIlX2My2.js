import{K as L}from"./keys.DacL9R4k.js";import{q as T,r as W,H as A,v as B}from"./theme.f1I71pQ3.js";import{S as V,L as k,D as w,R as z}from"./api.DwkIGh4A.js";import O from"./api._NxoufMi.js";import{d as P,a2 as x,p as d,X as I,o as q,c as K,r as M,G as U,n as X,k as y,N as j,s as G}from"./framework.uyLDs8jX.js";const H={...V,...k,...w,...z,...O},ee=P({name:"WbForm",__name:"form",props:x({rules:{},data:{},layout:{},labelWidth:{},labelAlign:{},allowTypes:{},onSubmit:{type:Function},onReset:{type:Function},default:{type:[String,Object,Function]},size:{},loading:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean}},H),emits:["submit","reset","click"],setup(b,{expose:D,emit:h}){const a=b,m=h,v=T({valueProps:["layout"],nameValueProps:["labelAlign"]}),R=W(),S=B(),g=()=>S("default",{allowNodeTypes:a.allowTypes||["WbFormItem"]}),F=A();function _(){var o;const e={},t=[];for(const r of F){const s=r.props;if(!(s!=null&&s.name))continue;const i=[...s.rules||[],...((o=a.rules)==null?void 0:o[s.name])||[]];i.length&&(t.push({...s,rules:i}),e[s.name]=i)}return{map:e,list:t}}const{list:E}=_(),p=d(0),c={pass:!0,errors:[]},l=d({...c});I(L,{labelWidthForm:a.labelWidth,labelWidth:p,formValidate:l});function N(e){e.preventDefault(),u(),n=G(()=>u()),m("submit",{data:a.data,validate:l.value})}function C(e){e.preventDefault(),f(),m("reset",{data:a.data})}let n;function u(){const e=[];for(const t of E)t.rules.some(o=>{var r;return o.required&&!((r=a.data)!=null&&r[t.name])?(e.push({prop:t.name,type:o.type,message:o.message}),!0):!1});l.value={pass:e.length===0,errors:e}}function f(){n==null||n(),l.value={...c}}return D({validate:u,clearValidate:f}),(e,t)=>(q(),K("form",{class:X(y(v)),style:j(y(R)),flex:"~ col",onSubmit:N,onReset:C},[M(e.$slots,"default",{labelWidth:p.value},()=>[U(g)])],38))}});export{ee as default};
