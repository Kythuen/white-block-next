import{d as M,a2 as P,a3 as R,p as f,v as j,$ as q,s as E,B as L,o as p,c as k,b as h,w as c,j as m,k as u,G as g,e as A,n as O,N as U,a0 as G}from"./framework.uyLDs8jX.js";import{q as K,r as T,E as W,y as z,z as $,I as X,v as H}from"./theme.f1I71pQ3.js";import{S as J,L as Q,D as Y,R as Z,C as _}from"./api.DwkIGh4A.js";import ee from"./api.CudfR5Mw.js";const ae={...J,...Q,...Y,...Z,..._,...ee},te=["p","focus-within"],ne=["value","readonly","disabled","step","placeholder","ring","focus-visible"],oe={key:3,h:"[calc(var(--wb-input-number-height)-3px)]",m:"r-px",p:"b-px",bg:"$wb-color-soft",flex:"~ none col",gap:"1px",class:"wb-input-number-options"},re=M({name:"WbInputNumber",__name:"input-number",props:P({type:{},theme:{},placeholder:{},align:{},max:{},min:{},step:{},decimal:{},separator:{type:Boolean},format:{type:Function},readonly:{type:Boolean},prefix:{type:[String,Object,Function]},suffix:{type:[String,Object,Function]},size:{},loading:{type:Boolean},disabled:{type:Boolean},clearable:{type:Boolean},value:{},modelValue:{},defaultValue:{},onChange:{type:Function}},ae),emits:["click","change","update:value","update:modelValue"],setup(C){const t=C,D=K({valueProps:["type","align","theme","size"],nameProps:["disabled","readonly"]}),V=T(),y=H(),x=()=>y("prefix"),B=()=>y("suffix"),[o,v]=W({props:R(t)});function I(e){return parseFloat(e.toFixed(t.decimal))}function r(e){if(!e)return e;let a=e;return typeof t.max=="number"&&a>t.max&&(a=Math.min(a,t.max)),typeof t.min=="number"&&a<t.min&&(a=Math.max(a,t.min)),a}const d=f(),w=f(!1);function b(e){w.value=e.type==="focus"}function F(e){e.preventDefault();let a=o.value||0;switch(e.code){case"ArrowUp":{a+=t.step;break}case"ArrowDown":{a-=t.step;break}}const n=r(a);i.value=n,v(n)}j(()=>{t.format&&(z(d.value,"focus",b),z(d.value,"blur",b))}),q(()=>{t.format&&($(d.value,"focus",b),$(d.value,"blur",b))});const l=f(""),i=f(o.value);E(()=>{var a,n;if(!i.value){l.value=(a=i.value)==null?void 0:a.toString();return}const e=(n=r(i.value))==null?void 0:n.toFixed(t.decimal);if(w.value){l.value=e;return}if(t.format){l.value=t.format(r(i.value),e);return}t.separator&&(l.value=e==null?void 0:e.replace(/\B(?=(\d{3})+(?!\d))/g,",")),l.value=e});function N(e){const n=e.target.value,s=n?parseFloat(n)||0:void 0;i.value=s,v(r(s))}function S(e){const{key:a}=e;let n=o.value||0;switch(a){case"add":n+=t.step;break;case"sub":{n-=t.step;break}}const s=I(r(n));i.value=s,v(s)}return(e,a)=>{const n=L("wb-button");return p(),k("div",{relative:"",w:"$wb-input-number-width",p:e.theme==="side"?"1px":"0",rounded:"$wb-input-number-radius",ring:"1 inset $wb-input-number-border",overflow:"hidden","focus-within":e.theme==="side"?"":"outline outline-2 outline-$wb-color-primary",flex:"~ inline",items:"center",gap:"$wb-input-number-gap",class:O(u(D)),style:U(u(V)),onClick:a[0]||(a[0]=G(s=>u(X)(s,"wb-button",S),["stop"]))},[e.theme==="side"?(p(),h(n,{key:0,tabindex:"-1","data-key":"sub",type:"outline",theme:"default",shape:"square",size:e.size,disabled:e.min!==void 0&&e.min>=u(o)},{default:c(()=>a[1]||(a[1]=[m("i",{i:"tdesign-minus"},null,-1)])),_:1},8,["size","disabled"])):(p(),h(x,{key:1})),m("input",{ref_key:"InputRef",ref:d,value:l.value,readonly:e.readonly,disabled:e.disabled,step:e.step,placeholder:e.placeholder,maxlength:"15",flex:"1",h:"$wb-input-number-height",p:"x-$wb-input-number-padding",bg:"$wb-input-number-background",ring:e.theme==="side"?"1 inset $wb-input-number-border":"",rounded:"$wb-input-number-radius",text:"$wb-input-number-text",overflow:"hidden","focus-visible":e.theme==="side"?"outline outline-2 outline-$wb-color-primary":"",onInput:N,onKeydown:F},null,40,ne),g(B),e.theme==="side"?(p(),h(n,{key:2,tabindex:"-1","data-key":"add",type:"outline",theme:"default",shape:"square",size:e.size,disabled:e.max!==void 0&&e.max<=u(o)},{default:c(()=>a[2]||(a[2]=[m("i",{i:"tdesign-add"},null,-1)])),_:1},8,["size","disabled"])):e.theme==="inner"?(p(),k("div",oe,[g(n,{size:e.size,disabled:e.max!==void 0&&e.max<=u(o),theme:"default",tabindex:"-1","data-key":"add",w:"full",h:"[calc(50%)]",rounded:"rt-$wb-input-number-radius","focus-visible":"outline-0 bg-$wb-color-primary"},{default:c(()=>a[3]||(a[3]=[m("i",{i:"tdesign-chevron-up"},null,-1)])),_:1},8,["size","disabled"]),g(n,{size:e.size,theme:"default",disabled:e.min!==void 0&&e.min>=u(o),tabindex:"-1","data-key":"sub",w:"full",h:"[calc(50%)]",rounded:"rb-$wb-input-number-radius","focus-visible":"outline-0 bg-$wb-color-primary"},{default:c(()=>a[4]||(a[4]=[m("i",{i:"tdesign-chevron-down"},null,-1)])),_:1},8,["size","disabled"])])):A("",!0)],14,te)}}});export{re as default};
